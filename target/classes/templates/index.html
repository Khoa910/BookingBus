<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title th:text="${pageTitle}">FUTA</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" th:href="@{/css/style.css}" type="text/css" media="all" />
    <link rel="stylesheet" th:href="@{/plugins/flexslider/flexslider.css}" type="text/css" media="all" />
    <script type="text/javascript" th:src="@{/js/jquery-1.11.3.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/bootstrap.min.js}"></script>
    <script type="text/javascript" th:src="@{/plugins/flexslider/jquery.flexslider-min.js}"></script>
    <script type="text/javascript" th:src="@{/plugins/sliderTabs/jquery.sliderTabs.js}"></script>
    <link rel="stylesheet" th:href="@{/plugins/sliderTabs/styles/jquery.sliderTabs.css}" />
    <script type="text/javascript" th:src="@{/plugins/sidebar/slidebars.js}"></script>
    <link rel="stylesheet" th:href="@{/plugins/sidebar/slidebars.css}" />
    <script type="text/javascript" th:src="@{/js/theme.js}"></script>
</head>
<body>
<div id="sb-site">
    <!-- Header -->
    <header>
        <div id="top">
            <div class="container">
                <div class="support">
                    <i class="fa fa-phone"></i> Tổng đài hỗ trợ: <span th:text="${supportHotline}">0902 1818 52</span>
                </div>
                <ul style="list-style-type: none; margin: 0; padding: 0; display: flex; align-items: center;">
                    <!-- Hiển thị khi người dùng đã đăng nhập -->
                    <li th:if="${session.username != null}" style="display: flex; gap: 10px;">
                        <a href="#" style="text-decoration: none; pointer-events: none; cursor: default;">
                            Xin chào, <span th:text="${session.username}">Tên người dùng</span>
                        </a>
                        <a th:href="@{/logout}" style="text-decoration: none;">Đăng xuất</a>
                    </li>
                    <!-- Hiển thị khi người dùng chưa đăng nhập -->
                    <li th:if="${session.username == null}" style="display: flex; gap: 10px;">
                        <a th:href="@{/login}" style="text-decoration: none;">Đăng nhập</a>
                        <a th:href="@{/register}" style="text-decoration: none;">Đăng ký</a>
                    </li>
                </ul>


            </div>
        </div>
        <div id="header-body">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 col-md-6">
                        <h1 id="logo">
                            <a th:href="@{/}">
                                <img th:src="@{/img/logo.png}" alt="Logo FUTA" />
                            </a>
                        </h1>
                    </div>
                    <div class="col-lg-6 col-md-6">
                        <nav id="main-nav" class="clearfix">
                            <ul>
                                <li><a th:href="@{/promotions}">Khuyến mãi</a></li>
                                <li><a th:href="@{/schedule}">Lịch trình</a></li>
                                <li><a th:href="@{/contact}">Liên hệ</a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Body Section -->
    <section id="body-top">
        <div class="container">
            <div class="row">
                <!-- Form Section -->
                <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12 col-ms-12">
                    <div>
                        <ul class="v-tabs clearfix" role="tablist">
                            <li role="presentation" class="active"><a href="#booking" aria-controls="booking" role="tab" data-toggle="tab">Mua vé trực tuyến</a></li>
                            <li role="presentation"><a href="#guide" aria-controls="guide" role="tab" data-toggle="tab">Hướng dẫn đặt vé</a></li>
                        </ul>

                        <div class="tab-content">
                            <div role="tabpanel" class="tab-pane active" id="booking">
                                <form th:action="@{/book/submit}" method="post" class="form">
                                    <!-- Dropdown điểm đi -->
                                    <div class="form-group">
                                        <label for="departure">Điểm đi</label>
                                        <select id="departure" name="departure" class="form-control">
                                            <option value="">Chọn điểm đi</option>
                                        </select>
                                    </div>

                                    <!-- Dropdown điểm đến -->
                                    <div class="form-group">
                                        <label for="arrival">Điểm đến</label>
                                        <select id="arrival" name="arrival" class="form-control">
                                            <option value="">Chọn điểm đến</option>
                                        </select>
                                    </div>

                                    <!-- Dropdown thời gian khởi hành -->
                                    <div class="form-group">
                                        <label for="departureTime">Thời gian khởi hành</label>
                                        <select id="departureTime" name="departureTime" class="form-control">
                                            <option value="">Chọn thời gian</option>
                                        </select>
                                    </div>


                                    <!-- Input số lượng vé -->
                                    <div class="form-group">
                                        <label for="quantity">Số lượng vé</label>
                                        <input id="quantity" name="quantity" type="number" class="form-control" min="1" max="10" value="1" required />
                                    </div>

                                    <!-- Nút Submit -->
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fa fa-ticket"></i> Mua vé
                                    </button>
                                </form>

                            </div>

                            <div role="tabpanel" class="tab-pane" id="guide">
                                <p>Hướng dẫn chi tiết sẽ được hiển thị ở đây.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slider Section -->
                <div class="col-lg-7 col-md-7 col-sm-12 col-xs-12 col-ms-12">
                    <div id="slider-home" class="flexslider">
                            <li><a href=""><img th:src="@{/img/slide.jpg}" alt="123"></a></li>
                            <li><a href=""><img th:src="@{/img/banner-recruitment.jpg}" alt="123"></a></li>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section id="ads-app">
        <div id="app-wrap" class="">
            <div class="container">
                <div class="row">
                    <div class="col-lg-4 col-md-4 col-sm-4   col-xs-6 col-ms-12 text-center">
                        <h3>HÃY Tải app để chúng tôi phục vụ bạn tốt hơn</h3>
                    </div>
                    <div class="col-lg-5 col-md-5 col-sm-5  col-xs-6 col-ms-12  ">
                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 col-ms-6">
                                <a href="#"><img th:src="@{/img/android.png}"></a>

                            </div>
                            <div class="relative col-lg-6 col-md-6 col-sm-6 col-xs-6 col-ms-6">
                                <a href="#"><img  th:src="@{/img/ios.png}"></a>
                            </div>
                        </div>


                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3 hidden-xs">
                        <img id="ico-phone" src="img/mobile-icon.png"></img>
                    </div>
                </div>
            </div>
        </div>
        <div id="app-foo">
            <h3>Đặt vé xe khách đi các tuyến đường phổ biến</h3>
        </div>
    </section>
    <section id="body-main" class="container">
        <div class="row">
            <div class="col-lg-7 col-md-7 col-sm-12 col-xs-12 col-ms-12">
                <div id="list-bus-slidertab" class="">

                    <!-- Nav tabs -->
                    <ul id="list-bus" class="nav nav-tabs slides" role="tablist">

                        <li class="active"><a href="#saigon">Sài gòn</a></li>
                        <li class="active"><a href="#hanoi">Hà Nội</a></li>
                        <li class="active"><a href="#danang">Đà Nẵng</a></li>
                    </ul>
                    <!-- Tab panes -->
                    <div id="saigon">
                        <table class="table">
                            <tr>
                                <td>Sài gòn</td>
                                <td><img th:src="@{/img/go.jpg}"></td>
                                <td>An Nhơn</td>
                                <td>340.000 đ/vé</td>
                                <td>
                                    <a href="" class="btn btn-primary">Mua vé <i class="fa fa-angle-double-right"></i> </a>
                                    <a href="" class="btn btn-success">Góp ý <i class="fa fa-commenting"></i> </a>
                                </td>
                            </tr>
                            <tr>
                                <td>Sài gòn</td>
                                <td><img src="img/go.jpg"></td>
                                <td>Cà Mau</td>
                                <td>260.000 đ/vé</td>
                                <td>
                                    <a href="" class="btn btn-primary">Mua vé <i class="fa fa-angle-double-right"></i> </a>
                                    <a href="" class="btn btn-success">Góp ý <i class="fa fa-commenting"></i> </a>
                                </td>
                            </tr>
                            <tr>
                                <td>Sài gòn</td>
                                <td><img src="img/go.jpg"></td>
                                <td>Hà nội</td>
                                <td>900.000 đ/vé</td>
                                <td>
                                    <a href="" class="btn btn-primary">Mua vé <i class="fa fa-angle-double-right"></i> </a>
                                    <a href="" class="btn btn-success">Góp ý <i class="fa fa-commenting"></i> </a>
                                </td>
                            </tr>
                            <tr>
                                <td>Sài gòn</td>
                                <td><img src="img/go.jpg"></td>
                                <td>Hà nội</td>
                                <td>900.000 đ/vé</td>
                                <td>
                                    <a href="" class="btn btn-primary">Mua vé <i class="fa fa-angle-double-right"></i> </a>
                                    <a href="" class="btn btn-success">Góp ý <i class="fa fa-commenting"></i> </a>
                                </td>
                            </tr>
                            <tr>
                                <td>Sài gòn</td>
                                <td><img src="img/go.jpg"></td>
                                <td>Hà nội</td>
                                <td>900.000 đ/vé</td>
                                <td>
                                    <a href="" class="btn btn-primary">Mua vé <i class="fa fa-angle-double-right"></i> </a>
                                    <a href="" class="btn btn-success">Góp ý <i class="fa fa-commenting"></i> </a>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div id="hanoi">
                        <table class="table">
                            <tr>
                                <td>Sài gòn</td>
                                <td><img src="img/go.jpg"></td>
                                <td>Hà nội</td>
                                <td>900.000 đ/vé</td>
                                <td>
                                    <a href="" class="btn btn-primary">Mua vé <i class="fa fa-angle-double-right"></i> </a>
                                    <a href="" class="btn btn-success">Góp ý <i class="fa fa-commenting"></i> </a>
                                </td>
                            </tr>
                            <tr>
                                <td>Sài gòn</td>
                                <td><img src="img/go.jpg"></td>
                                <td>Hà nội</td>
                                <td>900.000 đ/vé</td>
                                <td>
                                    <a href="" class="btn btn-primary">Mua vé <i class="fa fa-angle-double-right"></i> </a>
                                    <a href="" class="btn btn-success">Góp ý <i class="fa fa-commenting"></i> </a>
                                </td>
                            </tr>
                            <tr>
                                <td>Sài gòn</td>
                                <td><img src="img/go.jpg"></td>
                                <td>Hà nội</td>
                                <td>900.000 đ/vé</td>
                                <td>
                                    <a href="" class="btn btn-primary">Mua vé <i class="fa fa-angle-double-right"></i> </a>
                                    <a href="" class="btn btn-success">Góp ý <i class="fa fa-commenting"></i> </a>
                                </td>
                            </tr>
                            <tr>
                                <td>Sài gòn</td>
                                <td><img src="img/go.jpg"></td>
                                <td>Hà nội</td>
                                <td>900.000 đ/vé</td>
                                <td>
                                    <a href="" class="btn btn-primary">Mua vé <i class="fa fa-angle-double-right"></i> </a>
                                    <a href="" class="btn btn-success">Góp ý <i class="fa fa-commenting"></i> </a>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12 col-ms-12">
                <h3 class="marker"><i class="fa fa-map-marker"></i> Bản đồ tuyến</h3>
                <a href="#">
                    <img th:src="@{/img/maps.jpg}">
                </a>
            </div>
        </div>
    </section>
    <!-- Footer -->
    <footer>
        <div id="footer-header">
            <div class="container">
                <div class="row">
                    <div class="col-lg-3 col-md-3" th:each="linkGroup : ${footerLinks}">
                        <h4 th:text="${linkGroup.title}">Danh mục</h4>
                        <ul class="f-link">
                            <li th:each="link : ${linkGroup.links}">
                                <a th:href="${link.url}" th:text="${link.name}"></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div id="footer-img">
            <img th:src="@{/img/bg-top-footer.png}" class="center-block">
        </div>
        <div id="footer-body">
            <div class="f-body-wrap container">

                <nav id="nav-f">
                    <ul>
                        <li><a href="#">Lịch trình</a></li>
                        <li><a href="#">Về chúng tôi</a></li>
                        <li><a href="#">Hỗ trợ khách hàng</a></li>
                        <li><a href="#">Thanh toán an toàn</a></li>
                        <li><a href="#">Tuyển dung</a></li>
                    </ul>
                </nav>

                <div id="f-info" class="row">
                    <div id="social" class="col-lg-6 col-md-6 col-sm-6 col-xs-12 col-ms-12">
                        <ul>
                            <li>Kết nối chúng tôi</li>
                            <li>
                                <a href="">
                                    <i class="fa fa-facebook-square"></i>
                                </a>
                            </li>
                            <li>
                                <a href="">
                                    <i class="fa fa-google-plus-square"></i>
                                </a>
                            </li>
                            <li>
                                <a href="">
                                    <i class="fa fa-twitter-square"></i>
                                </a>
                            </li>
                        </ul>
                    </div>

                    <div id="info" class="col-lg-6 col-md-6 col-sm-6 col-xs-12 col-ms-12">
                        <div id="info-c">
                            <p>Công Ty CP Xe khách Phan Trương</p>
                            <p>Địa chỉ: 273 An Dương Vương, Q5, TP Hồ Chí Minh.</p>
                            <p>Điện thoại: 0123456789</p>
                            <p>Website: <a href="">info.vn</a> - Email: info@gmail.com </p>
                        </div>
                    </div>
                </div>

                <div class="f-copy">
                    <p>Design by <a href="">info.vn</a> </p>
                </div>
            </div>
        </div>
    </footer>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // URL API
        const apiUrl = '/api/schedules';

        // Fetch dữ liệu từ API
        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
                populateDropdowns(data);
            })
            .catch(error => console.error('Error fetching schedules:', error));
    });

    function populateDropdowns(schedules) {
        const departureDropdown = document.getElementById('departure');
        const arrivalDropdown = document.getElementById('arrival');
        const departureTimeDropdown = document.getElementById('departureTime');

        // Clear existing options (nếu có)
        departureDropdown.innerHTML = '<option value="">Chọn điểm đi</option>';
        arrivalDropdown.innerHTML = '<option value="">Chọn điểm đến</option>';
        departureTimeDropdown.innerHTML = '<option value="">Chọn thời gian</option>';

        // Duyệt qua danh sách và thêm option cho từng dropdown
        schedules.forEach(schedule => {
            // Thêm điểm đi
            if (!Array.from(departureDropdown.options).some(option => option.value === schedule.departureStation)) {
                const option = document.createElement('option');
                option.value = schedule.departureStation;
                option.textContent = schedule.departureStation;
                departureDropdown.appendChild(option);
            }

            // Thêm điểm đến
            if (!Array.from(arrivalDropdown.options).some(option => option.value === schedule.arrivalStation)) {
                const option = document.createElement('option');
                option.value = schedule.arrivalStation;
                option.textContent = schedule.arrivalStation;
                arrivalDropdown.appendChild(option);
            }

            // Thêm thời gian khởi hành
            const timeOption = document.createElement('option');
            timeOption.value = schedule.departureTime;
            timeOption.textContent = new Date(schedule.departureTime).toLocaleString(); // Format thời gian
            departureTimeDropdown.appendChild(timeOption);
        });
    }
</script>

</body>
</html>
